<template>
    <div id="login">
    <!-- 登录页面 -->
    <h4>用户名</h4>
    <el-input v-model="username" placeholder="用户名"></el-input>
    <h4>密码</h4>
    <el-input v-model="password" placeholder="密码" type="password" @keyup.enter.native="onLogin"></el-input>
    <el-button size="medium" @click="onLogin">立即登录</el-button>
    <p class="notice">没有账号?<router-link to="/register">注册新用户</router-link></p>
    </div>
</template>

<script>
import { mapActions } from 'vuex'

export default {
  data () {
    return {
      username: '',
      password: ''
    }
  },

  methods: {
    ...mapActions(['login']),

    onLogin() {
      this.login({username: this.username, password: this.password}).then(()=>{
          this.$router.push({path: this.$route.query.redirect || '/'})
        })
    }
  }
}
</script>

<style src="./template.less" lang="less"></style>
